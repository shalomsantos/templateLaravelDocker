version: '3.1'
services:
    app:
        build: .
        working_dir: /var/www
        volumes:
            - .:/var/www
            # php-ini-overrides.ini
        networks:
            - laravel

    mysql:
        image: 'mysql:5.7'
        working_dir: /var/www
        volumes:
            - .:/var/www
            - ./.docker/mysql/dbdata:/var/lib/mysql
        environment:
            - DB_CONNECTION=${DB_CONNECTION}
            - DB_HOST=${DB_HOST}
            - DB_PORT=${DB_PORT}
            - DB_DATABASE=${DB_DATABASE}
            - DB_USERNAME=${DB_USERNAME}
            - DB_PASSWORD=${DB_PASSWORD}
        ports:
            - '3306:3306'
        networks:
            - laravel

    nginx:
        image: 'nginx:alpine'
        working_dir: /var/www
        volumes:
            - .:/var/www
            - ./docker/nginx/:/etc/nginx/conf.d/
        ports:
            - '8989:80'
        networks:
            - laravel

networks:
    laravel:
        driver: bridge

    
